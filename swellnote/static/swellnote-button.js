const template = document.createElement("template");
template.innerHTML = `
<style>
:host {
    display: inline-block;

    --fill-color: #98878B;
    --white: white;
    --light-opacity: .33;
    --medium-opacity: .66;
}

/*** button-size attribute ***/
:host, :host([button-size="normal"]) {
    height: 90px;
    width: 90px;
}
:host([button-size="small"]) {
    height: 56px;
    width: 56px;
}

/*** RESETS ***/
button {
    appearance: none;
    -moz-appearance: none;
    -webkit-appearance: none;
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    font-size: inherit;
    font-style: inherit;
    margin: 0;
    padding: 0;
}
button:focus, button:active {
    outline: none;
}

/*** BORDER ***/
.border {
    stroke: var(--fill-color);
    stroke-opacity: var(--light-opacity);
    stroke-width: 2;
}
:host([highlighted]) .border, button:hover .border, button:focus .border, button:active .border {
    stroke: var(--white);
    stroke-opacity: 1;
}

/*** FILL ***/
.fill {
    fill: var(--fill-color);
    opacity: var(--light-opacity);
}
button:hover .fill {
    fill: var(--white);
}
button:focus .fill, button:active .fill {
    opacity: var(--medium-opacity);
}

/*** ICON ***/
.icon * {
    fill: var(--white);
}
button[disabled] .icon * {
    fill: var(--fill-color);
}

</style>

<button class="focusable" tabindex="0" type="button">
    <!-- Adapted from Figma design -->
    <svg viewBox="0 0 98 98" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect class="border" x="15" y="15" width="68" height="68" rx="4" transform="rotate(-45 49 49)"/>
        <rect class="fill" x="19" y="19" width="60" height="60" rx="3" transform="rotate(-45 49 49)"/>
        <g class="icon"></g>
    </svg>
</button>
`

// These were all copied from the same Figma design as the outline, so they match the viewbox precisely.
const icons = {
    "quill": `
<path d="M32.0285 66.4297C24.604 75.5203 51.8175 34.5168 51.8175 34.5168L40.7163 54.6101C39.5417 56.9491 40.2191 56.5641 38.303 58.55C36.0223 60.9139 35.8897 63.6718 35.8897 64.4598C35.8897 65.2478 32.9938 65.2478 32.0285 66.4297Z"/>
<path d="M48.4389 53.0342C43.1297 58.55 39.5978 57.2805 37.9851 58.9002C36.5371 58.1122 42.1644 51.4582 42.1644 51.4582L51.3349 35.3048C51.3349 35.3048 52.3002 32.5469 56.1615 30.9709C60.0228 29.395 67.7453 29.789 67.7453 29.789C67.7453 29.789 59.5401 46.3364 55.6788 47.1244C51.8176 47.9123 47.0243 47.1943 45.543 49.0943C43.2354 52.0544 46.0257 47.9123 54.2309 48.3063C54.7135 48.3295 51.9773 50.8913 49.8869 51.8522C47.6957 52.8594 46.267 51.4582 45.0603 52.6402C43.8537 53.8222 46.991 52.2462 48.4389 53.0342Z"/>`,
    "speaker": `
<path d="M37.825 43.3125H41.0998V55.6875H37.825V43.3125Z"/>
<path d="M28 47.1202C28 45.0173 29.7048 43.3125 31.8077 43.3125H36.7331V55.6875H31.8077C29.7048 55.6875 28 53.9827 28 51.8798V47.1202Z"/>
<path d="M38.9165 45.3668C38.9165 44.7104 39.1707 44.0796 39.6259 43.6066L47.6491 35.2693C48.4413 34.446 49.8328 35.0068 49.8328 36.1494L49.8328 62.8506C49.8328 63.9932 48.4413 64.554 47.6491 63.7307L39.6259 55.3934C39.1707 54.9204 38.9165 54.2896 38.9165 53.6332L38.9165 45.3668Z" fill="#FFFEFE"/>
<path d="M52.7185 43.3768C52.4502 42.7688 52.8901 42 53.5547 42C53.8329 42 54.0913 42.1381 54.2265 42.3812C54.7502 43.3228 56 45.9427 56 49.5C56 53.0573 54.7502 55.6772 54.2265 56.6188C54.0913 56.8619 53.8329 57 53.5547 57C52.8901 57 52.4502 56.2312 52.7185 55.6232C53.292 54.3237 54 52.1773 54 49.5C54 46.8227 53.292 44.6763 52.7185 43.3768Z"/>
<path d="M56.7984 40.362C56.4948 39.7739 56.9194 39 57.5812 39C57.844 39 58.0886 39.1248 58.2271 39.3482C58.9264 40.4761 61 44.2623 61 49.5C61 54.7377 58.9264 58.5239 58.2271 59.6518C58.0886 59.8752 57.844 60 57.5812 60C56.9194 60 56.4948 59.2261 56.7984 58.638C57.6871 56.9163 59 53.6676 59 49.5C59 45.3324 57.6871 42.0837 56.7984 40.362Z"/>
<path d="M60.8168 36.3496C60.4994 35.7688 60.9194 35 61.5812 35C61.844 35 62.0881 35.124 62.2287 35.346C63.0778 36.6862 66 41.8203 66 49C66 56.1797 63.0778 61.3138 62.2287 62.654C62.0881 62.876 61.844 63 61.5812 63C60.9194 63 60.4994 62.2312 60.8168 61.6504C61.9867 59.5094 64 54.9594 64 49C64 43.0406 61.9867 38.4906 60.8168 36.3496Z"/>`,
    "speaker-muted": `
<path d="M37.825 43.3125H41.0998V55.6875H37.825V43.3125Z"/>
<path d="M28 47.1202C28 45.0173 29.7048 43.3125 31.8077 43.3125H36.7331V55.6875H31.8077C29.7048 55.6875 28 53.9827 28 51.8798V47.1202Z"/>
<path d="M38.9165 45.3668C38.9165 44.7104 39.1707 44.0796 39.6259 43.6066L47.6491 35.2693C48.4413 34.446 49.8328 35.0068 49.8328 36.1494L49.8328 62.8506C49.8328 63.9932 48.4413 64.554 47.6491 63.7307L39.6259 55.3934C39.1707 54.9204 38.9165 54.2896 38.9165 53.6332L38.9165 45.3668Z" fill="#FFFEFE"/>
<path d="M56.3332 54.6594C55.9069 55.0621 55.2157 55.0621 54.7894 54.6594C54.3631 54.2566 54.3631 53.6037 54.7894 53.201L64.0522 44.4505C64.4785 44.0478 65.1697 44.0478 65.596 44.4505C66.0223 44.8533 66.0223 45.5062 65.596 45.9089L56.3332 54.6594Z"/>
<path d="M56.0311 54.9447C55.7716 55.1899 55.2157 55.0621 54.7894 54.6594C54.3631 54.2566 54.2278 53.7314 54.4873 53.4863L64.3542 44.1652C64.6137 43.92 65.1697 44.0478 65.596 44.4505C66.0223 44.8533 66.1575 45.3785 65.898 45.6236L56.0311 54.9447Z"/>
<path d="M54.79 45.909C54.3637 45.5063 54.3637 44.8533 54.79 44.4506C55.2163 44.0479 55.9075 44.0479 56.3338 44.4506L65.5966 53.2011C66.0229 53.6038 66.0229 54.2567 65.5966 54.6595C65.1703 55.0622 64.4791 55.0622 64.0528 54.6595L54.79 45.909Z"/>
<path d="M54.4879 45.6237C54.2284 45.3785 54.3637 44.8533 54.79 44.4506C55.2163 44.0479 55.7722 43.9201 56.0317 44.1653L65.8986 53.4864C66.1581 53.7315 66.0229 54.2567 65.5966 54.6595C65.1703 55.0622 64.6143 55.1899 64.3548 54.9448L54.4879 45.6237Z"/>`,
    "feedback": `
<path d="M32 52C32 51.4477 31.5523 51 31 51H29C28.4477 51 28 51.4477 28 52V66C28 66.5523 28.4477 67 29 67H31C31.5523 67 32 66.5523 32 66V52Z"/>
<path d="M43 47.5C43 46.1193 41.8807 45 40.5 45C39.1193 45 38 46.1193 38 47.5V59.375C38 60.7557 39.1193 61.875 40.5 61.875C41.8807 61.875 43 60.7557 43 59.375L43 47.5Z"/>
<path d="M33 52C33 52 35 52 36.5 51C38 50 38 48 38 48L42.7717 49.3466L40.2484 56.4411L33 52Z"/>
<path d="M49 55.8077C49 53.7048 47.2952 52 45.1923 52H33V66H45.1923C47.2952 66 49 64.2952 49 62.1923V55.8077Z"/>
<path d="M66 46C66 46.5523 66.4477 47 67 47H69C69.5523 47 70 46.5523 70 46V32C70 31.4477 69.5523 31 69 31H67C66.4477 31 66 31.4477 66 32V46Z"/>
<path d="M55 50.5C55 51.8807 56.1193 53 57.5 53C58.8807 53 60 51.8807 60 50.5V38.625C60 37.2443 58.8807 36.125 57.5 36.125C56.1193 36.125 55 37.2443 55 38.625L55 50.5Z"/>
<path d="M65 46C65 46 63 46 61.5 47C60 48 60 50 60 50L55.2283 48.6534L57.7516 41.5589L65 46Z"/>
<path d="M49 42.1923C49 44.2952 50.7048 46 52.8077 46H65V32H52.8077C50.7048 32 49 33.7048 49 35.8077V42.1923Z"/>`,
};

class SwellnoteButton extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({mode:"open"});
        const element = template.content.cloneNode(true);
        this.shadowRoot.appendChild(element);
        // Trigger setting innerHTML
        this.icon = this.getAttribute("icon")
    }

    get icon() {
        return this.getAttribute("icon");
    }

    set icon(iconName) {
        this.setAttribute("icon", iconName);
        this.shadowRoot.querySelector(".icon").innerHTML = icons[iconName];
    }
}

customElements.define("swellnote-button", SwellnoteButton);